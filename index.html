<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">
  <link href="stylesheet.css" rel="stylesheet" type="text/css">
  <title>Nyan Cat</title>

</head>

<body>
  <button id="make_it_rain">Make it rain!</button>
    <img id ="cat" src="img/cat.png">
<div id="container">
</div>
  <audio id="myAudio"> 
      <source src="audio/nyancat.ogg">
      <source src="audio/nyancat.mp3">
  </audio>

<script>

var btn = document.getElementById("make_it_rain"); 
btn.addEventListener("click", rainCat);

// Animation starts
function rainCat()
{ 

  setTimeout(animationEnd,10000);

  // Background properties 
    var background = document.getElementById("container");
        background.style.display = "block";
        document.body.appendChild(background);
    var pos_background = 0;
    setInterval(frameBackground, 100);

  // Background moves
    function frameBackground()
    {
    if (pos_background == -100) {
      pos_background = 0;
    } else {
      pos_background--;
      background.style.top = pos_background + "%"; 
      background.style.left = pos_background + "%"; 
      }
    }

  // Cat styling
    var nyanCat = document.getElementById("cat");
        nyanCat.style.display = "block";
        nyanCat.style.transform = "rotate(45deg)";
        document.body.appendChild(nyanCat);

  // Cat variables
    var pos_cat_left = 100;
    var pos_cat_top = 0;
    var rotate = Math.floor(Math.random() * 360);
    setInterval(frameCat, 5);

 

  // Cat moves
    function frameCat()
    {
      if (pos_cat_left == 100) {
        pos_cat_left = Math.floor(Math.random() * 50);
        pos_cat_top = 0;
        rotateCat = Math.floor(Math.random() * 360);
      } else {
        pos_cat_top = pos_cat_top + 0.5; 
        pos_cat_left = pos_cat_left + 0.5;
        nyanCat.style.top = pos_cat_top + "%"; 
        nyanCat.style.left = pos_cat_left + "%"; 
        nyanCat.style.transform = 'rotate(' + rotate + 'deg)';
        }
    }

  // Music plays
    document.getElementById('myAudio').play();
    function playAudio() { audio.play(); }
}

  // Animation stops
    function animationEnd() {
      location.reload(); 
    }

</script>


</body>